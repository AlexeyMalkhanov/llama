<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 13, 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Llama, Thrift Interface Behavior</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20140113" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="banner">
                  <span id="bannerLeft">
                Llama
                </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                <div class="xleft">
        Last Published: 2014-01-13
                  &nbsp;| Version: 1.0.0-cdh5.0.0-SNAPSHOT
                      </div>
            <div class="xright">            <a href="http://www.cloudera.com/" class="externalLink">Cloudera Inc.</a>
              
                      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                <h5>Llama</h5>
                  <ul>
                  <li class="none">
                  <a href="index.html">Overview</a>
            </li>
                  <li class="none">
                  <a href="Llama.thrift">Thrift Definition</a>
            </li>
                  <li class="none">
            <strong>Thrift Interface Behavior</strong>
          </li>
                  <li class="none">
                  <a href="TestingWithLlama.html">Testing with Llama</a>
            </li>
                  <li class="none">
                  <a href="RunningLlama.html">Running Llama</a>
            </li>
                  <li class="none">
                  <a href="llama-site.html">LlamaAM Configuration</a>
            </li>
          </ul>
                                 <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
          <img alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                       
                            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Licensed under the Apache License, Version 2.0 (the "License"); --><!-- you may not use this file except in compliance with the License. --><!-- You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, software --><!-- distributed under the License is distributed on an "AS IS" BASIS, --><!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. --><!-- See the License for the specific language governing permissions and --><!-- limitations under the License. --><div class="section"><h2>Llama - Thrift Interface Behavior<a name="Llama_-_Thrift_Interface_Behavior"></a></h2><div class="section"><h3>Llama Client Registration Protocol<a name="Llama_Client_Registration_Protocol"></a></h3><p>When registering a client must present a client-ID <tt>UUID</tt> and a callback <tt>HOST:PORT</tt>.</p><p>For a new registration, a new handle <tt>UUID</tt> will be returned to the client if the registration was successful.</p><p>However, if the client is doing a re-registration (because of a stale Thrift connection, a client restart, a Llama restart, etc) the following protocol must be observed:</p><table border="1" class="bodyTable"><tr class="a"><td align="center"><b>Client-ID UUID</b></td><td align="center"><b>Callback HOST:PORT</b></td><td align="center"><b>Returned handle</b></td><td align="center"><b>Llama behavior</b></td><td align="center"><b>Client behavior</b></td></tr><tr class="b"><td align="center">NEW</td><td align="center">NEW</td><td align="center">NEW</td><td align="left">There is no previous state associated with the handle</td><td align="left">There is no previous Llama state associated with the handle</td></tr><tr class="a"><td align="center">NEW</td><td align="center">EXISTING</td><td align="center">NEW</td><td align="left">Previous state with the existing handle is erased</td><td align="left">Client should not have a prior Llama state as it provided a new client-ID</td></tr><tr class="b"><td align="center">EXISTING</td><td align="center">NEW</td><td align="center"><b>ERROR</b></td><td align="left">Registration is rejected, existing state associated with the handle remains valid</td><td align="left">Client either use a new client-ID with a clean Llama state or provide the same client-ID preserving existing Llama state</td></tr><tr class="a"><td align="center">EXISTING</td><td align="center">EXISTING</td><td align="center">EXISTING</td><td align="left">Existing state associated with the handle remains valid. The client-ID and callback must be associated to the same handle, else it is an ERROR</td><td align="left">Client should known have existing Llama state for the handle</td></tr><tr class="b"><td align="center">EXISTING</td><td align="center">EXISTING</td><td align="center">NEW</td><td align="left">There is no previous state associated with the handle</td><td align="left">Client should discard all previous Llama state as it is not valid anymore</td></tr></table></div><div class="section"><h3>Llama Client Notifications<a name="Llama_Client_Notifications"></a></h3><p>TBD</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;            2014
              Cloudera Inc
            
                       - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
